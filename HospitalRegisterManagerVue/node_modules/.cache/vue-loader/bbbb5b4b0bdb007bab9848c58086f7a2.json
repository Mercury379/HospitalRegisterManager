{"remainingRequest":"E:\\software\\HospitalManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\software\\HospitalManagerVue\\src\\views\\SectionMessage.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\software\\HospitalManagerVue\\src\\views\\SectionMessage.vue","mtime":1705031798000},{"path":"E:\\software\\HospitalManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689001368000},{"path":"E:\\software\\HospitalManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1689001370000},{"path":"E:\\software\\HospitalManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689001368000},{"path":"E:\\software\\HospitalManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1689001370000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBqd3REZWNvZGUgZnJvbSAiand0LWRlY29kZSI7CmltcG9ydCByZXF1ZXN0IGZyb20gIkAvdXRpbHMvcmVxdWVzdC5qcyI7CmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAiQC91dGlscy9zdG9yYWdlLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJzZWN0aW9uTWVzc2FnZSIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlY3Rpb25PcHQ6IHRoaXMuJHJvdXRlLnF1ZXJ5LnNlY3Rpb25PcHQsCiAgICAgIHNlY3Rpb25EYXRhOiBbXSwKICAgICAgbW9udGhEYXlzOiBbXSwKICAgICAgY2xpY2tUYWc6IGZhbHNlLAogICAgICBvcmRlckZvcm1WaXNpYmxlOiBmYWxzZSwKICAgICAgb3JkZXJGb3JtOiB7IG9yZGVyRGF0ZTogIiIgfSwKICAgICAgdGltZXM6IFtdLAogICAgICBvcmRlclJ1bGVzOiB7CiAgICAgICAgb1RpbWU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6YCJ5oup5pe26Ze05q61IiwgdHJpZ2dlcjogImJsdXIiIH1dLAogICAgICB9LAogICAgICAvL+S4k+WutuWPtwogICAgICBsZXZlbDogZmFsc2UsCiAgICAgIC8v5oyC5Y+35pel5pyfCiAgICAgIG9yZGVyRGF0ZTogIiIsCiAgICAgIC8v5ou85o6l5pe26Ze05ZKM5pel5pyf5oiQ5Li6b0lkCiAgICAgIGlkVGltZTogIiIsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy/miZPlvIDmjILlj7flr7nor53moYbop6blj5Es6I635Y+W5oyC5Y+35pe26Ze05q615bey5Ymp5L2Z56Wo5pWwCiAgICByZXF1ZXN0VGltZShpZCkgewogICAgICB0aGlzLmlkVGltZSA9IGlkICsgdGhpcy5vcmRlckRhdGU7CiAgICAgIHJlcXVlc3QKICAgICAgICAuZ2V0KCJvcmRlci9maW5kT3JkZXJUaW1lIiwgewogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIGFySWQ6IHRoaXMuaWRUaW1lLAogICAgICAgICAgfSwKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0aGlzLm9yZGVyRGF0ZSk7CiAgICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICBjb25zdCBpc1RvZGF5ID0KICAgICAgICAgICAgZGF0ZS5nZXRGdWxsWWVhcigpID09PSB0b2RheS5nZXRGdWxsWWVhcigpICYmCiAgICAgICAgICAgIGRhdGUuZ2V0TW9udGgoKSA9PT0gdG9kYXkuZ2V0TW9udGgoKSAmJgogICAgICAgICAgICBkYXRlLmdldERhdGUoKSA9PT0gdG9kYXkuZ2V0RGF0ZSgpOwogICAgICAgICAgdmFyIGFycmF5ID0gW107CiAgICAgICAgICBpZiAoIXRoaXMuaXNUaW1lQWZ0ZXJUYXJnZXQoIjA5OjMwIikgfHwgIWlzVG9kYXkpIHsKICAgICAgICAgICAgYXJyYXkucHVzaCgiMDg6MzAtMDk6MzAgICIgKyAiICAg5L2Z5Y+3ICIgKyByZXMuZGF0YS5kYXRhLmVUT24pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCF0aGlzLmlzVGltZUFmdGVyVGFyZ2V0KCIxMDozMCIpIHx8ICFpc1RvZGF5KSB7CiAgICAgICAgICAgIGFycmF5LnB1c2goIjA5OjMwLTEwOjMwICAiICsgIiAgIOS9meWPtyAiICsgcmVzLmRhdGEuZGF0YS5uVE90KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghdGhpcy5pc1RpbWVBZnRlclRhcmdldCgiMTE6MzAiKSB8fCAhaXNUb2RheSkgewogICAgICAgICAgICBhcnJheS5wdXNoKCIxMDozMC0xMTozMCAgIiArICIgICDkvZnlj7cgIiArIHJlcy5kYXRhLmRhdGEudFRPZSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIXRoaXMuaXNUaW1lQWZ0ZXJUYXJnZXQoIjE1OjMwIikgfHwgIWlzVG9kYXkpIHsKICAgICAgICAgICAgYXJyYXkucHVzaCgiMTQ6MzAtMTU6MzAgICIgKyAiICAg5L2Z5Y+3ICIgKyByZXMuZGF0YS5kYXRhLmZUT2YpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCF0aGlzLmlzVGltZUFmdGVyVGFyZ2V0KCIxNjozMCIpIHx8ICFpc1RvZGF5KSB7CiAgICAgICAgICAgIGFycmF5LnB1c2goIjE1OjMwLTE2OjMwICAiICsgIiAgIOS9meWPtyAiICsgcmVzLmRhdGEuZGF0YS5mVE9zKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghdGhpcy5pc1RpbWVBZnRlclRhcmdldCgiMTc6MzAiKSB8fCAhaXNUb2RheSkgewogICAgICAgICAgICBhcnJheS5wdXNoKCIxNjozMC0xNzozMCAgIiArICIgICDkvZnlj7cgIiArIHJlcy5kYXRhLmRhdGEuc1RPcyk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnRpbWVzID0gYXJyYXk7CiAgICAgICAgfSk7CiAgICB9LAogICAgaXNUaW1lQWZ0ZXJUYXJnZXQodGltZVN0cmluZykgewogICAgICAvLyDliKTmlq3ml7bpl7TmmK/lkKbotoXov4d0aW1lU3RyaW5nKOWFpeWPguagvOW8j+Wmgu+8mjA5OjMwKQogICAgICBjb25zdCBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCk7CgogICAgICAvLyDop6PmnpDkvKDlhaXnmoTnm67moIfml7bpl7TlrZfnrKbkuLLvvIzojrflj5blsI/ml7blkozliIbpkp8KICAgICAgY29uc3QgW3RhcmdldEhvdXIsIHRhcmdldE1pbnV0ZV0gPSB0aW1lU3RyaW5nLnNwbGl0KCI6Iik7CgogICAgICAvLyDorr7nva7opoHmr5TovoPnmoTml7bpl7QKICAgICAgY29uc3QgdGFyZ2V0VGltZSA9IG5ldyBEYXRlKCk7CiAgICAgIHRhcmdldFRpbWUuc2V0SG91cnModGFyZ2V0SG91cik7CiAgICAgIHRhcmdldFRpbWUuc2V0TWludXRlcyh0YXJnZXRNaW51dGUpOwogICAgICB0YXJnZXRUaW1lLnNldFNlY29uZHMoMCk7CgogICAgICAvLyDmr5TovoPlvZPliY3ml7bpl7TmmK/lkKbotoXov4fkuobnm67moIfml7bpl7QKICAgICAgcmV0dXJuIGN1cnJlbnRUaW1lID4gdGFyZ2V0VGltZTsKICAgIH0sCiAgICAvL+aMguWPt+eCueWHu+ehruiupAogICAgb3JkZXJTdWNjZXNzKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgcmVxdWVzdAogICAgICAgICAgICAuZ2V0KCJwYXRpZW50L2FkZE9yZGVyIiwgewogICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgcElkOiB0aGlzLm9yZGVyRm9ybS5wSWQsCiAgICAgICAgICAgICAgICBkSWQ6IHRoaXMub3JkZXJGb3JtLmRJZCwKICAgICAgICAgICAgICAgIG9SZWdpc3RlclRpbWU6CiAgICAgICAgICAgICAgICAgIHRoaXMub3JkZXJGb3JtLm9yZGVyRGF0ZSArICIgIiArIHRoaXMub3JkZXJGb3JtLm9UaW1lLAogICAgICAgICAgICAgICAgYXJJZDogdGhpcy5pZFRpbWUsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgIT0gMjAwKQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuivpeaXtumXtOauteaXoOWJqeS9meWPt+a6kO+8geivt+mHjeaWsOmAieaLqe+8gSIpOwogICAgICAgICAgICAgIHRoaXMub3JkZXJGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5oyC5Y+35oiQ5Yqf77yBIik7CiAgICAgICAgICAgICAgdGhpcy5vcmRlckZvcm0ub1RpbWUgPSAiIjsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgICAgaWYgKGUucmVzcG9uc2UuZGF0YSA9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZS5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiZXJyb3Igc3VibWl0ISEiKTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vdG9rZW7op6PnoIEKICAgIHRva2VuRGVjb2RlKHRva2VuKSB7CiAgICAgIGlmICh0b2tlbiAhPT0gbnVsbCkgcmV0dXJuIGp3dERlY29kZSh0b2tlbik7CiAgICB9LAogICAgLy/miZPlvIDmjILlj7flr7nor53moYYKICAgIG9wZW5DbGljayhpZCwgbmFtZSkgewogICAgICB0aGlzLm9yZGVyRm9ybS5kSWQgPSBpZDsKICAgICAgdGhpcy5vcmRlckZvcm0uZE5hbWUgPSBuYW1lOwogICAgICB0aGlzLm9yZGVyRm9ybVZpc2libGUgPSB0cnVlOwogICAgICAvL+ivt+axguaMguWPt+aXtumXtOautQogICAgICB0aGlzLnJlcXVlc3RUaW1lKGlkKTsKICAgIH0sCiAgICAvL+mAieaLqeaXpeacn+inpuWPkeaXtumXtAogICAgZGF0ZUNsaWNrKGRhdGUpIHsKICAgICAgLy/ojrflj5bmjILlj7flubTmnIjml6UKICAgICAgY29uc3Qgbm93RGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgIGxldCB5ZWFyID0gbm93RGF0ZS5nZXRGdWxsWWVhcigpOwogICAgICB0aGlzLm9yZGVyRm9ybS5vcmRlckRhdGUgPSB5ZWFyICsgIi0iICsgZGF0ZTsKICAgICAgbGV0IGRhdGVZZWFyID0geWVhciArICItIiArIGRhdGU7CiAgICAgIHRoaXMub3JkZXJEYXRlID0gZGF0ZVllYXI7CiAgICAgIHJlcXVlc3QKICAgICAgICAvL+S/ruaUueWKn+iDve+8muagueaNruaXpeacn+OAgeenkeWupOWSjOaYr+WQpuS4k+WutuWPt+i/lOWbnuWMu+eUn+S/oeaBrwogICAgICAgIC5nZXQoIi9hcnJhbmdlL2ZpbmRCeVRpbWUiLCB7CiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgYXJUaW1lOiBkYXRlWWVhciwKICAgICAgICAgICAgZFNlY3Rpb246IHRoaXMuc2VjdGlvbk9wdCwKICAgICAgICAgICAgZGxldmVsOiB0aGlzLmxldmVsLCAvL+aWsOWinu+8jOWAvOS4umZhbHNl5pe26KGo56S655So5oi36YCJ5oup5pmu6YCa5Y+377yM5YC85Li6dHJ1ZeihqOekuueUqOaIt+mAieaLqeS4k+WutuWPtwogICAgICAgICAgfSwKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIC8vdGhpcy5zZWN0aW9uRGF0YS5kSWQgPSByZXMuZGF0YS5kYXRhLmRvY3RvcnMuZElkOwogICAgICAgICAgLyoqCiAgICAgICAgICAgKiDph43ngrnvvIHvvIHvvIHmiormlbDnu4TkuK3nmoTlr7nosaHlj5blh7rmnaXnlKhtYXAKICAgICAgICAgICAqLwogICAgICAgICAgdGhpcy5zZWN0aW9uRGF0YSA9IHJlcy5kYXRhLmRhdGEubWFwKChpdGVtKSA9PiBpdGVtLmRvY3Rvcik7CiAgICAgICAgICB0aGlzLmNsaWNrVGFnID0gdHJ1ZTsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhLmRhdGEubWFwKChpdGVtKSA9PiBpdGVtLmRvY3RvcikpOwogICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXMuZGF0YS5kYXRhWzBdLmRvY3Rvcik7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy/ojrflj5blvZPlpKnlj4rlkI435aSp55qE5pel5pyf5pif5pyfCiAgICBub3dEYXkobnVtKSB7CiAgICAgIHZhciBub3dEYXRlID0gbmV3IERhdGUoKTsKICAgICAgdmFyIGN1cnJlbnRIb3VyID0gbm93RGF0ZS5nZXRIb3VycygpOwogICAgICB2YXIgY3VycmVudE1pbnV0ZSA9IG5vd0RhdGUuZ2V0TWludXRlcygpOwoKICAgICAgLy8g5Yik5pat5b2T5YmN5pe26Ze05piv5ZCm5bey57uP6L+H5LqGMTc6MzAKICAgICAgaWYgKGN1cnJlbnRIb3VyID4gMTcgfHwgKGN1cnJlbnRIb3VyID09PSAxNyAmJiBjdXJyZW50TWludXRlID4gMzApKSB7CiAgICAgICAgbnVtKys7IC8vIOasoeaXpQogICAgICB9CgogICAgICBub3dEYXRlLnNldERhdGUobm93RGF0ZS5nZXREYXRlKCkgKyBudW0pOwogICAgICB2YXIgbW9udGggPSBub3dEYXRlLmdldE1vbnRoKCkgKyAxOwogICAgICB2YXIgZGF0ZSA9IG5vd0RhdGUuZ2V0RGF0ZSgpOwogICAgICBpZiAoZGF0ZSA8IDEwKSB7CiAgICAgICAgZGF0ZSA9ICIwIiArIGRhdGU7CiAgICAgIH0KICAgICAgaWYgKG1vbnRoIDwgMTApIHsKICAgICAgICBtb250aCA9ICIwIiArIG1vbnRoOwogICAgICB9CiAgICAgIHZhciB0aW1lID0gbW9udGggKyAiLSIgKyBkYXRlOwogICAgICB0aGlzLm1vbnRoRGF5cy5wdXNoKHRpbWUpOwogICAgfSwKICAgIC8v6K+35rGC6YOo6Zeo5Yy755Sf5L+h5oGvCiAgICByZXF1ZXN0U2VjdGlvbigpIHsKICAgICAgcmVxdWVzdAogICAgICAgIC5nZXQoInBhdGllbnQvZmluZERvY3RvckJ5U2VjdGlvbiIsIHsKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBkU2VjdGlvbjogdGhpcy4kcm91dGUucXVlcnkuc2VjdGlvbk9wdCwKICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzICE9PSAyMDApCiAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCLor7fmsYLmlbDmja7lpLHotKUiKTsKICAgICAgICAgIHRoaXMuc2VjdGlvbkRhdGEgPSByZXMuZGF0YS5kYXRhLmRvY3RvcnM7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YS5kYXRhLmRvY3RvcnMpOwogICAgICAgIH0pOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvL+iOt+WPluW9k+WkqeeahOWQjjflpKkKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNzsgaSsrKSB7CiAgICAgIHRoaXMubm93RGF5KGkpOwogICAgfQogICAgLy/mjInnp5HlrqTor7fmsYLljLvnlJ/kv6Hmga8KICAgIHRoaXMucmVxdWVzdFNlY3Rpb24oKTsKICAgIC8vIOino+eggXRva2VuCiAgICB0aGlzLm9yZGVyRm9ybS5wTmFtZSA9IHRoaXMudG9rZW5EZWNvZGUoZ2V0VG9rZW4oKSkucE5hbWU7CiAgICB0aGlzLm9yZGVyRm9ybS5wQ2FyZCA9IHRoaXMudG9rZW5EZWNvZGUoZ2V0VG9rZW4oKSkucENhcmQ7CiAgICB0aGlzLm9yZGVyRm9ybS5wSWQgPSB0aGlzLnRva2VuRGVjb2RlKGdldFRva2VuKCkpLnBJZDsKICAgIC8vY29uc29sZS5sb2codGhpcy5vcmRlckZvcm0ucElkKQogIH0sCn07Cg=="},{"version":3,"sources":["SectionMessage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SectionMessage.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div >\n    <!-- 卡片 -->\n    <el-card style=\"background-color: #FFFAFA;\">\n      <!-- 面包屑 -->\n      <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n        <el-breadcrumb-item >科室选择</el-breadcrumb-item>\n        <el-breadcrumb-item ><strong>日期选择</strong></el-breadcrumb-item>\n        <el-breadcrumb-item>挂号</el-breadcrumb-item>\n      </el-breadcrumb>\n\n      <!-- 两边布局 -->\n      <div class=\"head\">\n        <div>\n          <i class=\"iconfont icon-doctor\" style=\"margin: 5px; font-size: 26px\">\n            {{ sectionOpt }}医生列表</i\n          >\n        </div>\n\n        <!-- 选择专家号 -->\n        <el-switch v-model=\"level\" active-text=\"专家号\" inactive-text=\"普通号\">\n        </el-switch>\n\n        <!-- 选择挂号时间 -->\n        <div>\n          <i class=\"iconfont icon-riqi\" style=\"font-size: 22px\">\n            请选择你要挂号的日期：</i\n          >\n          <ul class=\"dateUl\">\n            <li v-for=\"monthDay in monthDays\" :key=\"monthDay\">\n              <el-button @click=\"dateClick(monthDay)\">\n                {{ monthDay }}</el-button\n              >\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <!-- 表格 -->\n      <el-table :data=\"sectionData\" stripe style=\"width: 100%\" border>\n        <el-table-column type=\"index\" label=\"序号\" width=\"60\"></el-table-column>\n        <el-table-column prop=\"dName\" label=\"医生姓名\" width=\"80\">\n        </el-table-column>\n        <el-table-column prop=\"dGender\" label=\"性别\" width=\"60\">\n        </el-table-column>\n        <el-table-column prop=\"dPost\" label=\"职位\" width=\"100\">\n        </el-table-column>\n        <el-table-column\n          prop=\"dSection\"\n          label=\"科室\"\n          width=\"100\"\n        ></el-table-column>\n        <el-table-column prop=\"dIntroduction\" label=\"简介\"> </el-table-column>\n        <el-table-column prop=\"dPrice\" label=\"挂号费用/元\" width=\"80\">\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"140\" v-if=\"clickTag\">\n          <template slot-scope=\"scope\">\n            <el-button\n              class=\"iconfont icon-r-paper\"\n              style=\"font-size: 14px\"\n              type=\"warning\"\n              @click=\"openClick(scope.row.dId, scope.row.dName)\"\n            >\n              挂号</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-card>\n    <!-- 挂号对话框 -->\n    <el-dialog title=\"填写挂号信息\" :visible.sync=\"orderFormVisible\">\n      <el-form :model=\"orderForm\" ref=\"orderForm\" :rules=\"orderRules\">\n        <el-form-item label=\"挂号时间段\" label-width=\"100px\" prop=\"oTime\">\n          <el-select\n            v-model=\"orderForm.oTime\"\n            placeholder=\"请选择\"\n            no-data-text=\"请尝试预约明日\"\n          >\n            <el-option\n              v-for=\"time in times\"\n              :key=\"time\"\n              :label=\"time\"\n              :value=\"time\"\n            >\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"挂号日期\" label-width=\"100px\">\n          <el-input\n            v-model=\"orderForm.orderDate\"\n            autocomplete=\"off\"\n            disabled\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"医生工号\" label-width=\"100px\">\n          <el-input\n            v-model=\"orderForm.dId\"\n            autocomplete=\"off\"\n            disabled\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"医生姓名\" label-width=\"100px\">\n          <el-input\n            v-model=\"orderForm.dName\"\n            autocomplete=\"off\"\n            disabled\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"患者姓名\" label-width=\"100px\">\n          <el-input\n            v-model=\"orderForm.pName\"\n            autocomplete=\"off\"\n            disabled\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"患者身份证号\" label-width=\"100px\">\n          <el-input\n            v-model=\"orderForm.pCard\"\n            autocomplete=\"off\"\n            disabled\n          ></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"orderFormVisible = false\" style=\"font-size: 18px\">\n          取 消</el-button\n        >\n        <el-button\n          type=\"primary\"\n          @click=\"orderSuccess('orderForm')\"\n          style=\"font-size: 18px\"\n        >\n          确 定</el-button\n        >\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport jwtDecode from \"jwt-decode\";\nimport request from \"@/utils/request.js\";\nimport { getToken } from \"@/utils/storage.js\";\nexport default {\n  name: \"sectionMessage\",\n  data() {\n    return {\n      sectionOpt: this.$route.query.sectionOpt,\n      sectionData: [],\n      monthDays: [],\n      clickTag: false,\n      orderFormVisible: false,\n      orderForm: { orderDate: \"\" },\n      times: [],\n      orderRules: {\n        oTime: [{ required: true, message: \"选择时间段\", trigger: \"blur\" }],\n      },\n      //专家号\n      level: false,\n      //挂号日期\n      orderDate: \"\",\n      //拼接时间和日期成为oId\n      idTime: \"\",\n    };\n  },\n  methods: {\n    //打开挂号对话框触发,获取挂号时间段已剩余票数\n    requestTime(id) {\n      this.idTime = id + this.orderDate;\n      request\n        .get(\"order/findOrderTime\", {\n          params: {\n            arId: this.idTime,\n          },\n        })\n        .then((res) => {\n          const date = new Date(this.orderDate);\n          const today = new Date();\n          const isToday =\n            date.getFullYear() === today.getFullYear() &&\n            date.getMonth() === today.getMonth() &&\n            date.getDate() === today.getDate();\n          var array = [];\n          if (!this.isTimeAfterTarget(\"09:30\") || !isToday) {\n            array.push(\"08:30-09:30  \" + \"   余号 \" + res.data.data.eTOn);\n          }\n          if (!this.isTimeAfterTarget(\"10:30\") || !isToday) {\n            array.push(\"09:30-10:30  \" + \"   余号 \" + res.data.data.nTOt);\n          }\n          if (!this.isTimeAfterTarget(\"11:30\") || !isToday) {\n            array.push(\"10:30-11:30  \" + \"   余号 \" + res.data.data.tTOe);\n          }\n          if (!this.isTimeAfterTarget(\"15:30\") || !isToday) {\n            array.push(\"14:30-15:30  \" + \"   余号 \" + res.data.data.fTOf);\n          }\n          if (!this.isTimeAfterTarget(\"16:30\") || !isToday) {\n            array.push(\"15:30-16:30  \" + \"   余号 \" + res.data.data.fTOs);\n          }\n          if (!this.isTimeAfterTarget(\"17:30\") || !isToday) {\n            array.push(\"16:30-17:30  \" + \"   余号 \" + res.data.data.sTOs);\n          }\n          this.times = array;\n        });\n    },\n    isTimeAfterTarget(timeString) {\n      // 判断时间是否超过timeString(入参格式如：09:30)\n      const currentTime = new Date();\n\n      // 解析传入的目标时间字符串，获取小时和分钟\n      const [targetHour, targetMinute] = timeString.split(\":\");\n\n      // 设置要比较的时间\n      const targetTime = new Date();\n      targetTime.setHours(targetHour);\n      targetTime.setMinutes(targetMinute);\n      targetTime.setSeconds(0);\n\n      // 比较当前时间是否超过了目标时间\n      return currentTime > targetTime;\n    },\n    //挂号点击确认\n    orderSuccess(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          request\n            .get(\"patient/addOrder\", {\n              params: {\n                pId: this.orderForm.pId,\n                dId: this.orderForm.dId,\n                oRegisterTime:\n                  this.orderForm.orderDate + \" \" + this.orderForm.oTime,\n                arId: this.idTime,\n              },\n            })\n            .then((res) => {\n              if (res.data.status != 200)\n                return this.$message.error(\"该时间段无剩余号源！请重新选择！\");\n              this.orderFormVisible = false;\n              this.$message.success(\"挂号成功！\");\n              this.orderForm.oTime = \"\";\n            })\n            .catch((e) => {\n              if (e.response.data == undefined) {\n                this.$message.error(e);\n              } else {\n                this.$message.error(e.response.data);\n              }\n            });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    //token解码\n    tokenDecode(token) {\n      if (token !== null) return jwtDecode(token);\n    },\n    //打开挂号对话框\n    openClick(id, name) {\n      this.orderForm.dId = id;\n      this.orderForm.dName = name;\n      this.orderFormVisible = true;\n      //请求挂号时间段\n      this.requestTime(id);\n    },\n    //选择日期触发时间\n    dateClick(date) {\n      //获取挂号年月日\n      const nowDate = new Date();\n      let year = nowDate.getFullYear();\n      this.orderForm.orderDate = year + \"-\" + date;\n      let dateYear = year + \"-\" + date;\n      this.orderDate = dateYear;\n      request\n        //修改功能：根据日期、科室和是否专家号返回医生信息\n        .get(\"/arrange/findByTime\", {\n          params: {\n            arTime: dateYear,\n            dSection: this.sectionOpt,\n            dlevel: this.level, //新增，值为false时表示用户选择普通号，值为true表示用户选择专家号\n          },\n        })\n        .then((res) => {\n          //this.sectionData.dId = res.data.data.doctors.dId;\n          /**\n           * 重点！！！把数组中的对象取出来用map\n           */\n          this.sectionData = res.data.data.map((item) => item.doctor);\n          this.clickTag = true;\n          console.log(res.data.data.map((item) => item.doctor));\n          //console.log(res.data.data[0].doctor);\n        });\n    },\n    //获取当天及后7天的日期星期\n    nowDay(num) {\n      var nowDate = new Date();\n      var currentHour = nowDate.getHours();\n      var currentMinute = nowDate.getMinutes();\n\n      // 判断当前时间是否已经过了17:30\n      if (currentHour > 17 || (currentHour === 17 && currentMinute > 30)) {\n        num++; // 次日\n      }\n\n      nowDate.setDate(nowDate.getDate() + num);\n      var month = nowDate.getMonth() + 1;\n      var date = nowDate.getDate();\n      if (date < 10) {\n        date = \"0\" + date;\n      }\n      if (month < 10) {\n        month = \"0\" + month;\n      }\n      var time = month + \"-\" + date;\n      this.monthDays.push(time);\n    },\n    //请求部门医生信息\n    requestSection() {\n      request\n        .get(\"patient/findDoctorBySection\", {\n          params: {\n            dSection: this.$route.query.sectionOpt,\n          },\n        })\n        .then((res) => {\n          if (res.data.status !== 200)\n            return this.$message.error(\"请求数据失败\");\n          this.sectionData = res.data.data.doctors;\n          console.log(res.data.data.doctors);\n        });\n    },\n  },\n  created() {\n    //获取当天的后7天\n    for (var i = 0; i < 7; i++) {\n      this.nowDay(i);\n    }\n    //按科室请求医生信息\n    this.requestSection();\n    // 解码token\n    this.orderForm.pName = this.tokenDecode(getToken()).pName;\n    this.orderForm.pCard = this.tokenDecode(getToken()).pCard;\n    this.orderForm.pId = this.tokenDecode(getToken()).pId;\n    //console.log(this.orderForm.pId)\n  },\n};\n</script>\n<style scoped lang=\"scss\">\n.dateUl li {\n  display: inline;\n  //margin: 5px;\n  padding: 1px;\n}\n.dateUl {\n  margin: 10px;\n}\n.el-breadcrumb {\n  margin: 8px;\n}\n.head {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.el-form {\n  margin-top: 0;\n}\n</style>\n"]}]}