{"remainingRequest":"E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\src\\views\\DoctorList.vue?vue&type=style&index=0&id=c0be6cd2&scoped=true&lang=scss&","dependencies":[{"path":"E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\src\\views\\DoctorList.vue","mtime":1705080615175},{"path":"E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1689001368000},{"path":"E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1689001370000},{"path":"E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\node_modules\\postcss-loader\\src\\index.js","mtime":1689001370000},{"path":"E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1689001368000},{"path":"E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689001368000},{"path":"E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1689001370000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmVsLXRhYmxlIHsKICBtYXJnaW4tdG9wOiAyMHB4OwogIG1hcmdpbi1ib3R0b206IDIwcHg7Cn0KLmVsLWZvcm0gewogIG1hcmdpbi10b3A6IDA7Cn0K"},{"version":3,"sources":["DoctorList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAodA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DoctorList.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <!-- 卡片 -->\n  <el-card style=\"background-color: #fff5ee9f;\">\n    <!-- 搜索栏及增加医生 -->\n    <el-row type=\"flex\">\n      <el-col :span=\"8\">\n        <el-input v-model=\"query\" placeholder=\"请输入姓名查询\">\n          <el-button\n            slot=\"append\"\n            style=\"font-size: 18px;\"\n            @click=\"requestDoctors\"\n          >\n            搜索</el-button\n          >\n        </el-input>\n      </el-col>\n      <el-col :span=\"4\"></el-col>\n        <el-col :span=\"4\">\n          <el-button type=\"info\" class=\"logup\" style=\"font-size: 18px\" @click=\"addFormVisible = true\"> 增加医生</el-button>\n        </el-col>\n      <el-col :span=\"4\"></el-col>\n    </el-row>\n    <!-- 表格 -->\n    <el-table :data=\"doctorData\" stripe style=\"width: 100%\" border>\n      <el-table-column prop=\"dId\" label=\"账号\" width=\"100\"> </el-table-column>\n      <el-table-column prop=\"dName\" label=\"姓名\" width=\"80\"> </el-table-column>\n      <el-table-column prop=\"dGender\" label=\"性别\" width=\"60\">\n      </el-table-column>\n      <el-table-column prop=\"dPost\" label=\"职位\" width=\"100\"> </el-table-column>\n      <el-table-column prop=\"dSection\" label=\"科室\" width=\"100\">\n      </el-table-column>\n      <el-table-column prop=\"dCard\" label=\"证件号\"> </el-table-column>\n      <el-table-column prop=\"dPhone\" label=\"手机号\"> </el-table-column>\n      <el-table-column prop=\"dPrice\" label=\"挂号费/元\" width=\"100\">\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"400\" fixed=\"right\">\n        <template slot-scope=\"scope\">\n          <el-button\n            style=\"font-size: 18px;\"\n            type=\"success\"\n            @click=\"modifyDialog(scope.row.dId)\"\n          >\n            编辑</el-button\n          >\n          <el-button\n            style=\"font-size: 18px;\"\n            type=\"danger\"\n            @click=\"deleteDialog(scope.row.dId)\"\n          >\n            删除</el-button\n          >\n          <el-button\n            style=\"font-size: 18px;\"\n            type=\"danger\"\n            @click=\"repsw(scope.row.dId)\"\n          >\n            重置密码</el-button\n          >\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页 -->\n    <el-pagination\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\"\n      background\n      layout=\"total, sizes, prev, pager, next, jumper\"\n      :current-page=\"pageNumber\"\n      :page-size=\"size\"\n      :page-sizes=\"[1, 2, 4, 8, 16]\"\n      :total=\"total\"\n    >\n    </el-pagination>\n    <!-- 增加医生对话框 -->\n    <el-dialog title=\"增加医生\" :visible.sync=\"addFormVisible\">\n      <el-form :model=\"addForm\" :rules=\"rules\" ref=\"ruleForm\">\n        <el-form-item label=\"账号\" label-width=\"80px\" prop=\"dId\">\n          <el-input v-model.number=\"addForm.dId\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"密码\" label-width=\"80px\">\n          <el-input\n            v-model=\"addForm.dPassword\"\n            autocomplete=\"off\"\n            disabled\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"姓名\" label-width=\"80px\" prop=\"dName\">\n          <el-input v-model=\"addForm.dName\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"性别\" label-width=\"80px\">\n          <el-radio v-model=\"addForm.dGender\" label=\"男\">男</el-radio>\n          <el-radio v-model=\"addForm.dGender\" label=\"女\">女</el-radio>\n        </el-form-item>\n        <el-form-item label=\"职位\" label-width=\"80px\" prop=\"dPost\">\n          <el-select v-model=\"addForm.dPost\" placeholder=\"请选择职称\">\n            <el-option\n              v-for=\"post in posts\"\n              :key=\"post\"\n              :label=\"post\"\n              :value=\"post\"\n            >\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"科室\" label-width=\"80px\" prop=\"dSection\">\n          <el-select\n            v-model=\"addForm.dSection\"\n            filterable\n            placeholder=\"请选择科室\"\n          >\n            <el-option\n              v-for=\"section in sections\"\n              :key=\"section\"\n              :label=\"section\"\n              :value=\"section\"\n            >\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"身份证号\" label-width=\"80px\" prop=\"dCard\">\n          <el-input v-model=\"addForm.dCard\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"手机号\" label-width=\"80px\" prop=\"dPhone\">\n          <el-input v-model=\"addForm.dPhone\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"邮箱\" label-width=\"80px\" prop=\"dEmail\">\n          <el-input v-model=\"addForm.dEmail\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"挂号费\" label-width=\"80px\" prop=\"dPrice\">\n          <el-input v-model=\"addForm.dPrice\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"简介\" label-width=\"80px\" prop=\"dIntroduction\">\n          <el-input\n            type=\"textarea\"\n            :rows=\"5\"\n            placeholder=\"请输入内容\"\n            v-model=\"addForm.dIntroduction\"\n          >\n          </el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"addFormVisible = false\" style=\"font-size: 18px;\">\n          取 消</el-button\n        >\n        <el-button\n          type=\"primary\"\n          @click=\"addDoctor('ruleForm')\"\n          style=\"font-size: 18px;\"\n        >\n          确 定</el-button\n        >\n      </div>\n    </el-dialog>\n\n    <!-- 修改医生对话框 -->\n    <el-dialog title=\"修改医生信息\" :visible.sync=\"modifyFormVisible\">\n      <el-form :model=\"modifyForm\" :rules=\"rules\" ref=\"ruleForm\">\n        <el-form-item label=\"账号\" label-width=\"80px\" prop=\"dId\">\n          <el-input\n            v-model.number=\"modifyForm.dId\"\n            autocomplete=\"off\"\n            disabled\n          ></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"姓名\" label-width=\"80px\" prop=\"dName\">\n          <el-input v-model=\"modifyForm.dName\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"性别\" label-width=\"80px\">\n          <el-radio v-model=\"modifyForm.dGender\" label=\"男\">男</el-radio>\n          <el-radio v-model=\"modifyForm.dGender\" label=\"女\">女</el-radio>\n        </el-form-item>\n        <el-form-item label=\"职位\" label-width=\"80px\" prop=\"dPost\">\n          <el-select v-model=\"modifyForm.dPost\" placeholder=\"请选择职称\">\n            <el-option\n              v-for=\"post in posts\"\n              :key=\"post\"\n              :label=\"post\"\n              :value=\"post\"\n            >\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"科室\" label-width=\"80px\" prop=\"dSection\">\n          <el-select\n            v-model=\"modifyForm.dSection\"\n            filterable\n            placeholder=\"请选择科室\"\n          >\n            <el-option\n              v-for=\"section in sections\"\n              :key=\"section\"\n              :label=\"section\"\n              :value=\"section\"\n            >\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"身份证号\" label-width=\"80px\" prop=\"dCard\">\n          <el-input v-model=\"modifyForm.dCard\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"手机号\" label-width=\"80px\" prop=\"dPhone\">\n          <el-input v-model=\"modifyForm.dPhone\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"邮箱\" label-width=\"80px\" prop=\"dEmail\">\n          <el-input v-model=\"modifyForm.dEmail\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"挂号费\" label-width=\"80px\" prop=\"dPrice\">\n          <el-input v-model=\"modifyForm.dPrice\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"简介\" label-width=\"80px\" prop=\"dIntroduction\">\n          <el-input\n            type=\"textarea\"\n            :rows=\"5\"\n            placeholder=\"请输入内容\"\n            v-model=\"modifyForm.dIntroduction\"\n          >\n          </el-input>\n        </el-form-item>\n        <el-form-item label=\"状态\" label-width=\"80px\" prop=\"dstatus\">\n          <el-input\n            v-model=\"modifyForm.dstatus\"\n            autocomplete=\"off\"\n            disabled\n          ></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"modifyFormVisible = false\" style=\"font-size: 18px;\">\n          取 消</el-button\n        >\n        <el-button\n          type=\"primary\"\n          @click=\"modifyDoctor('ruleForm')\"\n          style=\"font-size: 18px;\"\n        >\n          确 定</el-button\n        >\n      </div>\n    </el-dialog>\n  </el-card>\n</template>\n<script>\nimport request from \"@/utils/request.js\";\n\nexport default {\n  name: \"DoctorList\",\n  data() {\n    var validateMoblie = (rule, value, callback) => {\n      if (value === undefined) {\n        callback(new Error(\"请输入手机号\"));\n      } else {\n        let reg = /^1(3[0-9]|4[5,7]|5[0,1,2,3,5,6,7,8,9]|6[2,5,6,7]|7[0,1,7,8]|8[0-9]|9[1,8,9])\\d{8}$/;\n        if (!reg.test(value)) {\n          callback(new Error(\"请输入合法的手机号\"));\n        }\n        callback();\n      }\n    };\n    var validateCard = (rule, value, callback) => {\n      if (value === undefined) {\n        callback(new Error(\"请输入身份证号\"));\n      } else {\n        let reg = /(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/;\n        if (!reg.test(value)) {\n          callback(new Error(\"请输入合法的身份证号码\"));\n        }\n        callback();\n      }\n    };\n    return {\n      rules: {\n        dId: [\n          { required: true, message: \"请输入账号\", trigger: \"blur\" },\n          {\n            type: \"number\",\n            message: \"账号必须数字类型\",\n            trigger: \"blur\",\n          },\n        ],\n        dName: [\n          { required: true, message: \"请输入姓名\", trigger: \"blur\" },\n          {\n            min: 2,\n            max: 5,\n            message: \"账号必须是2到5个字符\",\n            trigger: \"blur\",\n          },\n        ],\n        dPost: [{ required: true, message: \"请选择职位\", trigger: \"blur\" }],\n        dSection: [\n          {\n            required: true,\n            message: \"请选择所属科室\",\n            trigger: \"blur\",\n          },\n        ],\n        dEmail: [\n          { required: true, message: \"请输入邮箱\", trigger: \"blur\" },\n          {\n            type: \"email\",\n            message: \"请输入正确的邮箱地址\",\n            trigger: [\"blur\", \"change\"],\n          },\n        ],\n        dPrice: [\n          {\n            required: true,\n            message: \"请输入挂号费\",\n            trigger: \"blur\",\n          },\n        ],\n        dPhone: [{ validator: validateMoblie }],\n        dCard: [{ validator: validateCard }],\n        dIntroduction: [\n          {\n            required: true,\n            message: \"请输入您的个人简介\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n      modifyFormVisible: false,\n      modifyForm: {},\n    };\n  },\n  methods: {\n    //打开修改对话框\n    modifyDialog(id) {\n      request\n        .get(\"admin/findDoctor\", {\n          params: {\n            dId: id,\n          },\n        })\n        .then((res) => {\n          if (res.data.status !== 200) this.$message.error(\"请求数据失败\");\n          this.modifyForm = res.data.data;\n          this.modifyFormVisible = true;\n          console.log(res);\n        });\n    },\n    //删除医生操作\n    deleteDoctor(id) {\n      request\n        .get(\"admin/deleteDoctor\", {\n          params: {\n            dId: id,\n          },\n        })\n        .then((res) => {\n          this.requestDoctors();\n          console.log(res);\n        });\n    },\n    //重置医生密码操作，根据id重置密码\n    deleteDoctor(id) {\n      request\n        .get(\"admin/repsw\", {\n          params: {\n            dId: id,\n          },\n        })\n        .then((res) => {\n          this.requestDoctors();\n          console.log(res);\n        });\n    },\n    //删除对话框\n    deleteDialog(id) {\n      this.$confirm(\"此操作将删除该医生信息, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          this.deleteDoctor(id);\n          this.$message({\n            type: \"success\",\n            message: \"删除成功!\",\n          });\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"已取消删除\",\n          });\n        });\n    },\n    // 增加医生\n    addDoctor(formName) {\n      if (!/^\\d+$/.test(this.addForm.dId)) {\n        this.$message.error(\"账号有误，只能是纯数字，且长度不能超过9位。\");\n        return;\n      }\n      if ((this.addForm.dId + \"\").length > 9) {\n        this.$message.error(\"账号不能超过9位！\");\n        return;\n      }\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          request\n            .get(\"admin/addDoctor\", {\n              params: {\n                dId: this.addForm.dId,\n                dGender: this.addForm.dGender,\n                dPassword: this.addForm.dPassword,\n                dName: this.addForm.dName,\n                dPost: this.addForm.dPost,\n                dSection: this.addForm.dSection,\n                dPhone: this.addForm.dPhone,\n                dEmail: this.addForm.dEmail,\n                dCard: this.addForm.dCard,\n                dPrice: this.addForm.dPrice,\n                dIntroduction: this.addForm.dIntroduction,\n                doctor: this.addForm,\n              },\n            })\n            .then((res) => {\n              if (res.data.status !== 200)\n                return this.$message.error(\"账号不合法或已被占用！\");\n              this.addFormVisible = false;\n              this.requestDoctors();\n              this.$message.success(\"增加医生成功！\");\n              console.log(res);\n            });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    //页面大小改变时触发\n    handleSizeChange(size) {\n      this.size = size;\n      this.requestDoctors();\n    },\n    //   页码改变时触发\n    handleCurrentChange(num) {\n      console.log(num);\n      this.pageNumber = num;\n      this.requestDoctors();\n    },\n    // 加载医生列表\n    requestDoctors() {\n      request\n        .get(\"admin/findAllDoctors\", {\n          params: {\n            pageNumber: this.pageNumber,\n            size: this.size,\n            query: this.query,\n          },\n        })\n        .then((res) => {\n          this.doctorData = res.data.data.doctors;\n\n          this.total = res.data.data.total;\n        });\n    },\n  },\n  created() {\n    this.requestDoctors();\n  },\n};\n</script>\n<style scoped lang=\"scss\">\n.el-table {\n  margin-top: 20px;\n  margin-bottom: 20px;\n}\n.el-form {\n  margin-top: 0;\n}\n</style>\n"]}]}