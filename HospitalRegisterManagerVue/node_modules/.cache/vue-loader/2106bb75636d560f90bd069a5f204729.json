{"remainingRequest":"E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\src\\views\\MyChair.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\src\\views\\MyChair.vue","mtime":1705079862420},{"path":"E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689001368000},{"path":"E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1689001370000},{"path":"E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689001368000},{"path":"E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1689001370000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBqd3REZWNvZGUgZnJvbSAiand0LWRlY29kZSI7CmltcG9ydCByZXF1ZXN0IGZyb20gIkAvdXRpbHMvcmVxdWVzdC5qcyI7CmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAiQC91dGlscy9zdG9yYWdlLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIk15Q2hhaXIiLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBjaGFpckRhdGE6W10sCiAgICAgICAgICAgIHVzZXJJZDoxLAogICAgICAgICAgICBkTmFtZTonJywKICAgICAgICAgICAgY2hvb3NlZGF0YTonJwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgY29udmVydElTTzg2MDFUb0Zvcm1hdHRlZERhdGUoaXNvU3RyaW5nKSB7ICAKICAgICAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoaXNvU3RyaW5nKTsgIAogICAgICAgICAgICAgICAgdmFyIHllYXIgPSBkYXRlLmdldFVUQ0Z1bGxZZWFyKCk7ICAKICAgICAgICAgICAgICAgIHZhciBtb250aCA9ICgiMCIgKyAoZGF0ZS5nZXRVVENNb250aCgpICsgMSkpLnNsaWNlKC0yKTsgLy8gTW9udGhzIGFyZSB6ZXJvLWJhc2VkICAKICAgICAgICAgICAgICAgIHZhciBkYXkgPSAoIjAiICsgZGF0ZS5nZXRVVENEYXRlKCkpLnNsaWNlKC0yKTsgIAogICAgICAgICAgICAgICAgdmFyIGhvdXJzID0gKCIwIiArIGRhdGUuZ2V0VVRDSG91cnMoKSkuc2xpY2UoLTIpOyAgCiAgICAgICAgICAgICAgICB2YXIgbWludXRlcyA9ICgiMCIgKyBkYXRlLmdldFVUQ01pbnV0ZXMoKSkuc2xpY2UoLTIpOyAgCiAgICAgICAgICAgICAgICB2YXIgc2Vjb25kcyA9ICgiMCIgKyBkYXRlLmdldFVUQ1NlY29uZHMoKSkuc2xpY2UoLTIpOyAgCiAgCiAgICAgICAgICAgICAgICByZXR1cm4geWVhciArICItIiArIG1vbnRoICsgIi0iICsgZGF5ICsgIiAiICsgaG91cnMgKyAiOiIgKyBtaW51dGVzICsgIjoiICsgc2Vjb25kczsgIAogICAgICAgIH0sICAKICAgICAgICAvL+aWsOWinu+8muivt+axguaJi+acr+S/oeaBr++8jOeUqOaIt+i+k+WFpeWMu+eUn+Wnk+WQjeWSjOaXpeacn+iDvei/m+ihjOafpeivou+8jOm7mOiupOS4uicnCiAgICAgICAgcmVxdWVzdENoYWlyKCl7CiAgICAgICAgICAgIHJlcXVlc3QuZ2V0KCJjaGFpci9maW5kQ2hhaXJCeVBpZCIsIHsKICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICAgIHBJZDogdGhpcy51c2VySWQsCiAgICAgICAgICAgICAgICAgICAgZE5hbWU6dGhpcy5kTmFtZSwKICAgICAgICAgICAgICAgICAgICBkYXRhOnRoaXMuY2hvb3NlZGF0YSwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIGlmKHJlcy5kYXRhLnN0YXR1cyAhPT0gMjAwKQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuivt+axguaVsOaNruWksei0pSIpOwogICAgICAgICAgICAgICAgdGhpcy5jaGFpckRhdGEgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgLy8gdmFyIGRhdGUgPSBuZXcgRGF0ZShyZXMuZGF0YS5kYXRhLnNTdGFydFRpbWUpOwogICAgICAgICAgICAgICAgLy8gdGhpcy5jaGFpckRhdGEuc1N0YXJ0VGltZT10aGlzLmNvbnZlcnRJU084NjAxVG9Gb3JtYXR0ZWREYXRlKGRhKQogICAgICAgICAgICB9KQoKICAgICAgICB9LAogICAgICAgICAgIC8vdG9rZW7op6PnoIEKICAgIHRva2VuRGVjb2RlKHRva2VuKXsKICAgICAgaWYgKHRva2VuICE9PSBudWxsKQogICAgICByZXR1cm4gand0RGVjb2RlKHRva2VuKTsKICAgIH0sCgogICAgfSwKICAgIGNyZWF0ZWQoKXsKICAgICAgICAgICAvLyDop6PnoIF0b2tlbgogICAgICAgICAgICB0aGlzLnVzZXJJZCA9IHRoaXMudG9rZW5EZWNvZGUoZ2V0VG9rZW4oKSkucElkOwogICAgICAgICAgICB0aGlzLnJlcXVlc3RDaGFpcigpOwogICAgfQp9Cg=="},{"version":3,"sources":["MyChair.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MyChair.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <el-card style=\"background-color: #fff5ee9f;\">\n            <el-input v-model=\"dName\" placeholder=\"请输入医生姓名\" style=\"width: 250px;margin-right: 30px;\"></el-input>           \n            <el-date-picker\n                v-model=\"choosedata\"\n                type=\"date\"\n                placeholder=\"请选择日期\"\n                style=\"margin-right: 30px;\"\n            >\n            </el-date-picker>\n            <el-button\n                style=\"font-size: 18px;margin-bottom: 30px;\"\n                @click=\"requestOrder\"\n            >\n                搜索</el-button\n            >\n            <el-table :data=\"chairData\" border stripe>\n                <el-table-column label=\"手术座椅号\" prop=\"cId\" v-model=\"chairData.cId\"></el-table-column>\n                <el-table-column label=\"医生姓名\" prop=\"dId\" v-model=\"chairData.dId\"></el-table-column>\n                <el-table-column label=\"预计开始时间\" prop=\"sPrestartTime\" v-model=\"chairData.sPrestartTime\"></el-table-column>\n                <el-table-column label=\"开始时间\" prop=\"sStartTime\" v-model=\"chairData.sStartTime\"></el-table-column>\n                <el-table-column label=\"预计手术时间(h)\" prop=\"sPretime\" v-model=\"chairData.sPretime\"></el-table-column>\n                <el-table-column label=\"手术状态\" prop=\"cOrder\">\n                    <template slot-scope=\"scope\">\n                        <el-tag v-if=\"scope.row.sStartTime == null\" type=\"danger\">未开始</el-tag>\n                        <el-tag v-if=\"scope.row.sStartTime != null && scope.row.sEndTime ==null\" type=\"success\">进行中</el-tag>\n                        <el-tag v-if=\"scope.row.sEndTime !=null\" type=\"success\">已结束</el-tag>\n                    </template>\n                 </el-table-column>\n                <el-table-column label=\"结束时间\" prop=\"sEndTime\" v-model=\"chairData.sEndTime\"></el-table-column>\n\n            </el-table>\n        </el-card>\n    </div>\n</template>\n<script>\nimport jwtDecode from \"jwt-decode\";\nimport request from \"@/utils/request.js\";\nimport { getToken } from \"@/utils/storage.js\";\nexport default {\n    name: \"MyChair\",\n    data() {\n        return {\n            chairData:[],\n            userId:1,\n            dName:'',\n            choosedata:''\n        }\n    },\n    methods: {\n        convertISO8601ToFormattedDate(isoString) {  \n                var date = new Date(isoString);  \n                var year = date.getUTCFullYear();  \n                var month = (\"0\" + (date.getUTCMonth() + 1)).slice(-2); // Months are zero-based  \n                var day = (\"0\" + date.getUTCDate()).slice(-2);  \n                var hours = (\"0\" + date.getUTCHours()).slice(-2);  \n                var minutes = (\"0\" + date.getUTCMinutes()).slice(-2);  \n                var seconds = (\"0\" + date.getUTCSeconds()).slice(-2);  \n  \n                return year + \"-\" + month + \"-\" + day + \" \" + hours + \":\" + minutes + \":\" + seconds;  \n        },  \n        //新增：请求手术信息，用户输入医生姓名和日期能进行查询，默认为''\n        requestChair(){\n            request.get(\"chair/findChairByPid\", {\n                params: {\n                    pId: this.userId,\n                    dName:this.dName,\n                    data:this.choosedata,\n                }\n            })\n            .then(res => {\n                if(res.data.status !== 200)\n                return this.$message.error(\"请求数据失败\");\n                this.chairData = res.data.data;\n                // var date = new Date(res.data.data.sStartTime);\n                // this.chairData.sStartTime=this.convertISO8601ToFormattedDate(da)\n            })\n\n        },\n           //token解码\n    tokenDecode(token){\n      if (token !== null)\n      return jwtDecode(token);\n    },\n\n    },\n    created(){\n           // 解码token\n            this.userId = this.tokenDecode(getToken()).pId;\n            this.requestChair();\n    }\n}\n</script>"]}]}