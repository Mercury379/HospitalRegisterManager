{"remainingRequest":"E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\src\\views\\DoctorOrder.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\src\\views\\DoctorOrder.vue","mtime":1705080153152},{"path":"E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689001368000},{"path":"E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1689001370000},{"path":"E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689001368000},{"path":"E:\\HospitalAppointmentRegistration\\HospitalManager1\\HospitalManager\\HospitalRegisterManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1689001370000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByZXF1ZXN0IGZyb20gIkAvdXRpbHMvcmVxdWVzdC5qcyI7CmltcG9ydCBqd3REZWNvZGUgZnJvbSAiand0LWRlY29kZSI7CgppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gIkAvdXRpbHMvc3RvcmFnZS5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRG9jdG9yT3JkZXIiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VySWQ6IDEsCiAgICAgIG9yZGVyRGF0YTogW10sCiAgICAgIHBhZ2VOdW1iZXI6IDEsCiAgICAgIHNpemU6IDgsCiAgICAgIHF1ZXJ5OiAiIiwKICAgICAgdG90YWw6IDMsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy/ngrnlh7vov73or4rmjInpkq4KICAgIGRlYWxDbGljayhvSWQsIHBJZCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogIi9kZWFsT3JkZXJBZ2FpbiIsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIG9JZDogb0lkLAogICAgICAgICAgcElkOiBwSWQsCiAgICAgICAgfSwKICAgICAgfSk7CiAgICB9LAogICAgLy/pobXpnaLlpKflsI/mlLnlj5jml7bop6blj5EKICAgIGhhbmRsZVNpemVDaGFuZ2Uoc2l6ZSkgewogICAgICBjb25zb2xlLmxvZyhzaXplKTsKICAgICAgdGhpcy5zaXplID0gc2l6ZTsKICAgICAgdGhpcy5yZXF1ZXN0T3JkZXJzKCk7CiAgICB9LAogICAgLy8gICDpobXnoIHmlLnlj5jml7bop6blj5EKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UobnVtKSB7CiAgICAgIGNvbnNvbGUubG9nKG51bSk7CiAgICAgIHRoaXMucGFnZU51bWJlciA9IG51bTsKICAgICAgdGhpcy5yZXF1ZXN0T3JkZXJzKCk7CiAgICB9LAoKICAgIC8vcXVlcnnmlLnkuLrnlKjmiLfovpPlhaXnmoTlp5PlkI3vvIzov5vooYzmqKHns4rmn6Xor6LvvIzpu5jorqTkuLonJwogICAgcmVxdWVzdE9yZGVycygpIHsKICAgICAgcmVxdWVzdAogICAgICAgIC5nZXQoIm9yZGVyL2ZpbmRPcmRlckZpbmlzaCIsIHsKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBkSWQ6IHRoaXMudXNlcklkLAogICAgICAgICAgICBwYWdlTnVtYmVyOiB0aGlzLnBhZ2VOdW1iZXIsCiAgICAgICAgICAgIHNpemU6IHRoaXMuc2l6ZSwKICAgICAgICAgICAgcXVlcnk6IHRoaXMucXVlcnksCiAgICAgICAgICB9LAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cyAhPT0gMjAwKSB0aGlzLiRtZXNzYWdlLmVycm9yKCLor7fmsYLmlbDmja7lpLHotKUiKTsKICAgICAgICAgIHRoaXMub3JkZXJEYXRhID0gcmVzLmRhdGEuZGF0YS5vcmRlcnM7CiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLmRhdGEuZGF0YS50b3RhbDsKICAgICAgICB9KTsKICAgIH0sCiAgICAvL3Rva2Vu6Kej56CBCiAgICB0b2tlbkRlY29kZSh0b2tlbikgewogICAgICBpZiAodG9rZW4gIT09IG51bGwpIHJldHVybiBqd3REZWNvZGUodG9rZW4pOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvLyDop6PnoIF0b2tlbgogICAgLy90aGlzLm9yZGVyRGF0YS5wTmFtZSA9IHRoaXMudG9rZW5EZWNvZGUoZ2V0VG9rZW4oKSkucE5hbWU7CiAgICAvL3RoaXMub3JkZXJEYXRhLnBDYXJkID0gdGhpcy50b2tlbkRlY29kZShnZXRUb2tlbigpKS5wQ2FyZDsKICAgIHRoaXMudXNlcklkID0gdGhpcy50b2tlbkRlY29kZShnZXRUb2tlbigpKS5kSWQ7CiAgICBjb25zb2xlLmxvZyh0aGlzLm9yZGVyRGF0YS5wTmFtZSk7CiAgICAvL3RoaXMub3JkZXJEYXRhLnBOYW1lID0gImRhc2RhIgogICAgdGhpcy5yZXF1ZXN0T3JkZXJzKCk7CiAgfSwKfTsK"},{"version":3,"sources":["DoctorOrder.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoHA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DoctorOrder.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <el-card style=\"background-color: #fff5ee9f;\">\n      <!-- 搜索栏 -->\n      <el-row type=\"flex\">\n        <el-col :span=\"6\">\n          <el-input v-model=\"query\" placeholder=\"请输入患者姓名查询\">\n            <el-button\n              slot=\"append\"\n              style=\"font-size: 18px;\"\n              @click=\"requestOrders\"\n            >\n              查询</el-button\n            >\n          </el-input>\n        </el-col>\n      </el-row>\n      <el-table :data=\"orderData\" stripe style=\"width: 100%\" border>\n        <el-table-column\n          prop=\"oId\"\n          label=\"挂号单号\"\n          width=\"80px\"\n        ></el-table-column>\n\n        <el-table-column prop=\"pId\" label=\"患者id\" width=\"100px\">\n        </el-table-column>\n        <el-table-column prop=\"pName\" label=\"患者姓名\" width=\"100px\">\n        </el-table-column>\n\n        <el-table-column\n          prop=\"oRegisterTime\"\n          label=\"挂号时间\"\n          width=\"190px\"\n        ></el-table-column>\n        <el-table-column\n          prop=\"oRecord\"\n          label=\"病因\"\n          width=\"400px\"\n        ></el-table-column>\n        <el-table-column\n          prop=\"oDrug\"\n          label=\"药物\"\n          width=\"180px\"\n        ></el-table-column>\n        <el-table-column\n          prop=\"oItem\"\n          label=\"检查项目\"\n          width=\"180px\"\n        ></el-table-column>\n        <el-table-column\n          prop=\"oMaterial\"\n          label=\"所用材料\"\n          width=\"180px\"\n        ></el-table-column>\n        <el-table-column\n          prop=\"oTotalPrice\"\n          label=\"需交费用/元\"\n          width=\"80px\"\n        ></el-table-column>\n        <el-table-column prop=\"oPriceStatus\" label=\"缴费状态\" width=\"100px\">\n          <template slot-scope=\"scope\">\n            <el-tag type=\"success\" v-if=\"scope.row.oPriceStatus === 1\"\n              >已缴费</el-tag\n            >\n            <!-- <el-tag type=\"danger\" v-if=\"scope.row.oPriceStatus === 0 && scope.row.oStatus === 1\">未缴费</el-tag> -->\n            <el-tag\n              type=\"danger\"\n              v-if=\"scope.row.oPriceStatus === 0 && scope.row.oStatus === 1\"\n              >未缴费</el-tag\n            >\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"oStatus\" label=\"挂号状态\" width=\"100px\">\n          <template slot-scope=\"scope\">\n            <el-tag\n              type=\"success\"\n              v-if=\"scope.row.oStatus === 1 && scope.row.oPriceStatus === 1\"\n              >已完成</el-tag\n            >\n            <el-tag\n              type=\"danger\"\n              v-if=\"scope.row.oStatus === 0 && scope.row.oStatus === 0\"\n              >未完成</el-tag\n            >\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"140\" fixed=\"right\">\n          <template slot-scope=\"scope\">\n            <el-button\n              type=\"warning\"\n              style=\"font-size: 18px\"\n              @click=\"dealClick(scope.row.oId, scope.row.pId)\"\n              v-if=\"scope.row.oStatus === 1 && scope.row.oPriceStatus === 1\"\n              ><i class=\"iconfont icon-r-yes\" style=\"font-size: 22px;\"></i>\n              追诊</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 分页 -->\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        background\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :current-page=\"pageNumber\"\n        :page-size=\"size\"\n        :page-sizes=\"[1, 2, 4, 8, 16]\"\n        :total=\"total\"\n      >\n      </el-pagination>\n    </el-card>\n  </div>\n</template>\n<script>\nimport request from \"@/utils/request.js\";\nimport jwtDecode from \"jwt-decode\";\n\nimport { getToken } from \"@/utils/storage.js\";\nexport default {\n  name: \"DoctorOrder\",\n  data() {\n    return {\n      userId: 1,\n      orderData: [],\n      pageNumber: 1,\n      size: 8,\n      query: \"\",\n      total: 3,\n    };\n  },\n  methods: {\n    //点击追诊按钮\n    dealClick(oId, pId) {\n      this.$router.push({\n        path: \"/dealOrderAgain\",\n        query: {\n          oId: oId,\n          pId: pId,\n        },\n      });\n    },\n    //页面大小改变时触发\n    handleSizeChange(size) {\n      console.log(size);\n      this.size = size;\n      this.requestOrders();\n    },\n    //   页码改变时触发\n    handleCurrentChange(num) {\n      console.log(num);\n      this.pageNumber = num;\n      this.requestOrders();\n    },\n\n    //query改为用户输入的姓名，进行模糊查询，默认为''\n    requestOrders() {\n      request\n        .get(\"order/findOrderFinish\", {\n          params: {\n            dId: this.userId,\n            pageNumber: this.pageNumber,\n            size: this.size,\n            query: this.query,\n          },\n        })\n        .then((res) => {\n          if (res.data.status !== 200) this.$message.error(\"请求数据失败\");\n          this.orderData = res.data.data.orders;\n          this.total = res.data.data.total;\n        });\n    },\n    //token解码\n    tokenDecode(token) {\n      if (token !== null) return jwtDecode(token);\n    },\n  },\n  created() {\n    // 解码token\n    //this.orderData.pName = this.tokenDecode(getToken()).pName;\n    //this.orderData.pCard = this.tokenDecode(getToken()).pCard;\n    this.userId = this.tokenDecode(getToken()).dId;\n    console.log(this.orderData.pName);\n    //this.orderData.pName = \"dasda\"\n    this.requestOrders();\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.el-table {\n  margin-top: 20px;\n  margin-bottom: 20px;\n}\n</style>\n"]}]}